<!DOCTYPE HTML>
<!--
	Arcana by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<!-- <title>Arcana by HTML5 UP</title> -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
</head>

<body class="is-preload">
	<div id="page-wrapper">

		<!-- Header -->
		<div id="header">

			<!-- Logo -->
			<h1><a href="index.html" id="logo">Moira<em> 68k Emulator</em></a></h1>

			<!-- Nav -->
			<nav id="nav">
				<ul>
					<li><a href="index.html">News</a></li>
					<li class="current"><a href="about.html">About</a></li>
					<li><a href="https://github.com/dirkwhoffmann/moira">Code</a></li>
					<li><a href="https://github.com/dirkwhoffmann/moira/issues">Issues</a></li>
					<li><a href="https://github.com/dirkwhoffmann/moira/discussions">Discussions</a></li>
					<li><a href="https://github.com/dirkwhoffmann/moira/wiki">Wiki</a></li>
					<li><a href="impressum.html">Impressum</a></li>
				</ul>
			</nav>
		</div>

		<!-- Banner -->
		<section id="banner">
		</section>

		<!-- Grid -->
		<section class="wrapper style1">
			<div class="container">
				<div class="row">
					<section class="col-6 col-12-narrower">
						<div class="box post">
							<a href="#" class="image left"><img src="images/icon-mo.jpg" alt="" /></a>
							<div class="inner">
								<h3>About</h3>
								<p>Moira is a Motorola 68000 emulator written in C++. It aims for high emulation
									accuracy, both functionally and temporally. Moira is the heart of the vAmiga
									emulator where it does a very good job so far.</p>
							</div>
						</div>
					</section>
					<section class="col-6 col-12-narrower">
						<div class="box post">
							<a href="#" class="image left"><img src="images/cpp.jpg" alt="" /></a>
							<div class="inner">
								<h3>Portability</h3>
								<p>Moira has been tested thouroughly with clang on macOS as part of the vAmiga
									project. It has been designed to compile on other platforms as well. If you encouter
									portability issues, please feel free to contact me.</p>
							</div>
						</div>
					</section>
				</div>
				<div class="row">
					<section class="col-6 col-12-narrower">
						<div class="box post">
							<a href="#" class="image left"><img src="images/speed.jpg" alt="" /></a>
							<div class="inner">
								<h3>Speed</h3>
								<p>Due to heavy template usage, it is recommended to compile Moira with clang or gcc.
									Using these compilers, emulation speed is comparable to the high-speed Musashi
									core.</p>
							</div>
						</div>
					</section>
					<section class="col-6 col-12-narrower">
						<div class="box post">
							<a href="#" class="image left"><img src="images/gnu.jpg" alt="" /></a>
							<div class="inner">
								<h3>License</h3>
								<p>Moira is open-source and published under the terms of the GNU General Public
									License.</p>
							</div>
						</div>
					</section>
				</div>
			</div>
			<!-- </section> -->

			<!-- One column -->
			<!-- <section> -->
			<!-- <section class="wrapper style1"> -->
			<div class="container">
				<div id="content">

					<!-- Content -->

					<article>
						<!-- <header>
							<h2>History</h2>
						</header>-->

						<h3>History</h3>
						<p>Before I started the vAmiga project in early 2019, I informed myself about the existing
							Motorola 68k emulators at the time. What I was looking for was a throughly tested emulator
							with high emulation speed and good code quality. I did find such an emulator in the form of
							Musashi, written by Karl Stenerud, which is being used successfully in the Mame project for
							many years now. I had been using Musashi in vAmiga for roughly a year until I realized that
							it lacks one important feature: Precise inter-instruction timing information.

							In order to emulate the memory bus of the Amiga with high precision, I needed to know the
							number of cycles that had elapsed, for example, between the beginning of a command execution
							and the first or second access of the memory bus. Like most 68k emulators, Musashi only
							provides the total number of CPU cycles that has been consumed by the execution of a single
							instruction. Because cycle-exact bus timing is a crucial aspect for Amiga emulation, I came
							to the conclusion that more sophisticated timing control was needed to bring vAmiga to the
							next level.

							My search for a new CPU core had drawn my attention to the Portable68000 emulator and its
							successor Denise m680x0, both written by "PiCiJi". These emulators offer inter-instruction
							timing and thus exactly what I needed to take vAmiga to the next level. However, Denise
							wasn't thoroughly tested back then, but already far superior to portable68000 from a
							software-architectural point of view. At this point I decided to implement my own CPU based
							on the three CPU cores I already knew. In fact Musashi, Portable68000 and Denise m680x0 can
							be considered the intellectual ancestors of my CPU implementation: Moira imitates much of
							the concepts the three other emulators are based on. Externally, Moira might appear a bit
							like a clone of Musashi, because it mimics Musashiâ€™s disassembler output down to the last
							character. Internally, Moira exhibits many similarities with Denise m680x0. For example, it
							provides exactly the same sync function that is being used by Portable68000 and Denise to
							count the number elapsed cycles between bus accesses.</p>

						<h3>Accuracy</h3>
						<p>To achieve a high emulation accuracy, I have applied two different test strategies. Firstly,
							I developed an automated test- runner, which is also part of this repository. After
							downloading, compiling, and running the code from this repository, the test-runner starts
							automatically. It iterates over all opcodes, runs Moira and Musashi in parallel, and
							compares the calculated results afterwards. It executes in an infinite loop and only aborts
							if a discrepancy between the two CPUs is detected.</p>

						<p>I also tested Moira extensively with cputester, a tool written by Toni Wilen which is now
							part of the Amiga emulator UAE. With cputester you can create a large number of test
							programs that run on the Amiga platform and test the CPU "from the inside". With cputester I
							created a large number of test programs that were then executed inside vAmiga.</p>

						<p>Based on the testing results, all Amiga features of Moira can be considered to be thoroughly
							tested. Please note that all features that are not used by the Amiga (such as
							non-autovectored interrupts or the special behaviour of the TAS command) are either
							unimplemented or untested yet. If you plan to use the emulation core and need these
							features, please let me know. I am eager to add the yet missing features to the emulator.
						</p>

						<h3>Disassembler and debugger</h3>
						<p>Its debugging capabilities include setting breakpoints and watchpoints as well as logging the
							instruction stream. vAmiga makes extensive use of these functions by making them accessible
							in its CPU inspector panel. It is a nice example of how Moira can be utilized in a
							real-world application:</p>

						<div class="container">
							<div id="content">
								<article>
									<span class="image featured"><img src="images/cpuPanel.jpg" alt="" /></span>
								</article>
							</div>
						</div>

						<h3>Credits</h3>
						<p><i>Nanos gigantum humeris insidentes.</i> I am grateful to:</p>
						<ul class="links">
							<li>Karl Stenerud for writing <a href="https://github.com/kstenerud/Musashi">Musashi</a>.</li>
							<li>PiCiJi for writing Denise <a href="https://bitbucket.org/piciji/denise/src/master/emulation/processor">m680x0</a>
							and <a href="https://sourceforge.net/projects/portable68000">portable68000</a>.</li>
							<li>Toni Wilen for writing cputester.</li>
						</ul>
				</div>
				</article>

			</div>
	</div>
	</section>

	<!-- Footer -->
	<div id="footer">

		<!-- Icons -->
		<ul class="icons">
			<li><a href="https://github.com/dirkwhoffmann" class="icon brands fa-github"><span
						class="label">GitHub</span></a></li>
		</ul>

		<!-- Copyright -->
		<div class="copyright">
			<ul class="menu">
				<li>&copy; <a href="http://www.dirkwhoffmann.de">Dirk W. Hoffmann</a></li>
				<li><a href="impressum.html">Impressum</a></li>
				<li><a href="impressum.html">Datenschutz</a></li>
				<li><a href="http://html5up.net">HTML5 UP</a></li>
			</ul>
		</div>
	</div>
	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.dropotron.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

</body>

</html>